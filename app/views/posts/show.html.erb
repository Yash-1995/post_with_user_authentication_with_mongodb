<div class="mb-4">
  <h2><%= @post.title %></h2>
  <p><%= @post.content %></p>
  <small class="text-muted">By <%= @post.user.email %></small>
</div>

<% if @post.user.id == current_user.id %>
    <%= link_to "Edit", edit_post_path(@post), class: "btn btn-warning me-2" %>
    <%= link_to "Delete", post_path(@post), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger" %>
<% end %>

<hr>

<h4>Comments</h4>

<%= form_with(model: [@post, @post.comments.build], local: true) do |f| %>
  <div class="mb-2">
    <%= f.label :body, "Comment" %>
    <%= f.text_area :body, rows: 3, class: "form-control" %>
  </div>
  <%= f.submit "Add Comment", class: "btn btn-primary" %>
<% end %>


<% @post.comments.each do |comment| %>
  <div class="card mt-3">
    <div class="card-body">
      <strong><%= comment.user&.email %>:</strong>
      <p><%= comment.body %></p>
    </div>
  </div>
<% end if @post.comments.exists? %>
